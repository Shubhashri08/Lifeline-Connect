{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/shubhashri/Desktop/Lifeline-Connect/frontend/components/map-inner.tsx"],"sourcesContent":["\"use client\"\n\nimport { useEffect, useState } from \"react\"\nimport { MapContainer, TileLayer, Marker, Popup, Polyline, useMap } from \"react-leaflet\"\nimport \"leaflet/dist/leaflet.css\"\nimport L from \"leaflet\"\n\n// Fix for default marker icon issues in React Leaflet with Next.js\nconst iconUrl = \"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png\"\nconst iconRetinaUrl = \"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon-2x.png\"\nconst shadowUrl = \"https://unpkg.com/leaflet@1.7.1/dist/images/marker-shadow.png\"\n\nconst defaultIcon = L.icon({\n  iconUrl,\n  iconRetinaUrl,\n  shadowUrl,\n  iconSize: [25, 41],\n  iconAnchor: [12, 41],\n  popupAnchor: [1, -34],\n  shadowSize: [41, 41],\n})\n\nL.Marker.prototype.options.icon = defaultIcon\n\ninterface Facility {\n  id: string\n  name: string\n  lat: number\n  lng: number\n  availability: string\n}\n\ninterface MapComponentProps {\n  facilities: Facility[]\n  userLocation?: { lat: number; lng: number } | null\n}\n\nfunction ChangeView({ center }: { center: [number, number] }) {\n  const map = useMap()\n  map.setView(center)\n  return null\n}\n\nexport default function MapInner({ facilities, userLocation }: MapComponentProps) {\n  const [mounted, setMounted] = useState(false)\n\n  useEffect(() => {\n    setMounted(true)\n  }, [])\n\n  if (!mounted) return <div className=\"h-full w-full bg-muted flex items-center justify-center\">Loading Map...</div>\n\n  // Default center (India) if no user location\n  const center: [number, number] = userLocation\n    ? [userLocation.lat, userLocation.lng]\n    : [20.5937, 78.9629]\n\n  // Zoom level depending on context\n  const zoom = userLocation ? 12 : 5\n\n  return (\n    <div className=\"h-full w-full relative z-0\">\n      <MapContainer center={center} zoom={zoom} scrollWheelZoom={true} className=\"h-full w-full rounded-lg\">\n        <TileLayer\n          attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n        />\n\n        {/* Recenter map when user location changes */}\n        <ChangeView center={center} />\n\n        {/* User Marker */}\n        {userLocation && (\n          <Marker position={[userLocation.lat, userLocation.lng]}>\n            <Popup>You are here</Popup>\n          </Marker>\n        )}\n\n        {/* Facility Markers & Lines */}\n        {facilities.map((facility) => (\n          <div key={facility.id}>\n            <Marker position={[facility.lat, facility.lng]}>\n              <Popup>\n                <b>{facility.name}</b><br />\n                Status: {facility.availability}\n              </Popup>\n            </Marker>\n\n            {/* Draw Line from User to Facility if User Location exists */}\n            {userLocation && (\n              <Polyline\n                positions={[\n                  [userLocation.lat, userLocation.lng],\n                  [facility.lat, facility.lng]\n                ]}\n                pathOptions={{ color: 'blue', dashArray: '10, 10', opacity: 0.6 }}\n              />\n            )}\n          </div>\n        ))}\n      </MapContainer>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;;;AALA;;;;;AAOA,mEAAmE;AACnE,MAAM,UAAU;AAChB,MAAM,gBAAgB;AACtB,MAAM,YAAY;AAElB,MAAM,cAAc,+JAAC,CAAC,IAAI,CAAC;IACzB;IACA;IACA;IACA,UAAU;QAAC;QAAI;KAAG;IAClB,YAAY;QAAC;QAAI;KAAG;IACpB,aAAa;QAAC;QAAG,CAAC;KAAG;IACrB,YAAY;QAAC;QAAI;KAAG;AACtB;AAEA,+JAAC,CAAC,MAAM,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,GAAG;AAelC,SAAS,WAAW,EAAE,MAAM,EAAgC;;IAC1D,MAAM,MAAM,IAAA,6JAAM;IAClB,IAAI,OAAO,CAAC;IACZ,OAAO;AACT;GAJS;;QACK,6JAAM;;;KADX;AAMM,SAAS,SAAS,EAAE,UAAU,EAAE,YAAY,EAAqB;;IAC9E,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,IAAA,0KAAS;8BAAC;YACR,WAAW;QACb;6BAAG,EAAE;IAEL,IAAI,CAAC,SAAS,qBAAO,6LAAC;QAAI,WAAU;kBAA0D;;;;;;IAE9F,6CAA6C;IAC7C,MAAM,SAA2B,eAC7B;QAAC,aAAa,GAAG;QAAE,aAAa,GAAG;KAAC,GACpC;QAAC;QAAS;KAAQ;IAEtB,kCAAkC;IAClC,MAAM,OAAO,eAAe,KAAK;IAEjC,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC,0KAAY;YAAC,QAAQ;YAAQ,MAAM;YAAM,iBAAiB;YAAM,WAAU;;8BACzE,6LAAC,oKAAS;oBACR,aAAY;oBACZ,KAAI;;;;;;8BAIN,6LAAC;oBAAW,QAAQ;;;;;;gBAGnB,8BACC,6LAAC,8JAAM;oBAAC,UAAU;wBAAC,aAAa,GAAG;wBAAE,aAAa,GAAG;qBAAC;8BACpD,cAAA,6LAAC,4JAAK;kCAAC;;;;;;;;;;;gBAKV,WAAW,GAAG,CAAC,CAAC,yBACf,6LAAC;;0CACC,6LAAC,8JAAM;gCAAC,UAAU;oCAAC,SAAS,GAAG;oCAAE,SAAS,GAAG;iCAAC;0CAC5C,cAAA,6LAAC,4JAAK;;sDACJ,6LAAC;sDAAG,SAAS,IAAI;;;;;;sDAAK,6LAAC;;;;;wCAAK;wCACnB,SAAS,YAAY;;;;;;;;;;;;4BAKjC,8BACC,6LAAC,kKAAQ;gCACP,WAAW;oCACT;wCAAC,aAAa,GAAG;wCAAE,aAAa,GAAG;qCAAC;oCACpC;wCAAC,SAAS,GAAG;wCAAE,SAAS,GAAG;qCAAC;iCAC7B;gCACD,aAAa;oCAAE,OAAO;oCAAQ,WAAW;oCAAU,SAAS;gCAAI;;;;;;;uBAf5D,SAAS,EAAE;;;;;;;;;;;;;;;;AAuB/B;IA5DwB;MAAA"}}]
}